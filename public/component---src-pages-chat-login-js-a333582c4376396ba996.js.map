{"version":3,"sources":["webpack:///./src/pages/chat/login.js"],"names":["API_URL","constants","ChatLoginPage","useCookies","cookies","setCookies","useEffect","console","log","path","title","onSubmit","event","preventDefault","user_input","target","value","pass_input","axios","post","username","password","then","response","data","status","name","token","window","admin","location","replace","catch","error","className","type","id","placeholder","href"],"mappings":"2PAaMA,GADaC,IAAS,WACZA,IAAS,SAiEVC,UA/DO,WAAO,IAAD,EACIC,YAAW,CAAC,OAAQ,UAA3CC,EADmB,KACVC,EADU,KAG1BC,qBAAU,WACRC,QAAQC,IAAIJ,GACZC,EAAW,OAAQ,GAAG,CAAEI,KAAM,UAC9BJ,EAAW,QAAS,GAAG,CAAEI,KAAM,YAC9B,IAoCH,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKC,MAAM,eACX,kBAAC,IAAD,KACE,2EAAoD,6BACpD,0BAAMC,SAvCE,SAACC,GACbA,EAAMC,iBAEN,IAAMC,EAAaF,EAAMG,OAAO,GAAGC,MAC7BC,EAAaL,EAAMG,OAAO,GAAGC,MACnCE,IAAMC,KAAKnB,EAAU,QAAS,CAC5BoB,SAAUN,EACVO,SAAUJ,IAEXK,MAAK,SAACC,GACwB,YAAzBA,EAASC,KAAKC,QAChBpB,EAAW,OAAQkB,EAASC,KAAKE,KAAK,CAAEjB,KAAM,UAC9CJ,EAAW,QAASkB,EAASC,KAAKG,MAAM,CAAElB,KAAM,UAC5C,oBAAOmB,SACmB,OAAxBL,EAASC,KAAKK,MACdD,OAAOE,SAASC,QAAQ,eAGtB,oBAAOH,QACTA,OAAOE,SAASC,QAAQ,WAO9BxB,QAAQC,IAAI,mBAGfwB,OAAM,SAACC,GACN1B,QAAQC,IAAIyB,QAUR,2BAAOC,UAAU,aAAaC,KAAK,OAAOC,GAAG,OAC3CV,KAAK,OAAOW,YAAY,aAAY,6BACtC,2BAAOH,UAAU,aAAaC,KAAK,WACjCT,KAAK,WAAWW,YAAY,aAAY,6BAAK,6BAC/C,yBAAKH,UAAU,cACb,2BAAOA,UAAU,cAAcC,KAAK,SAASnB,MAAM,YAGvD,0BAAMkB,UAAU,eAAhB,4BAAuD,uBAAGI,KAAK,kBAAR,YAAvD,KAAoG","file":"component---src-pages-chat-login-js-a333582c4376396ba996.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { navigate } from \"gatsby\";\nimport axios from \"axios\";\nimport { useCookies } from \"react-cookie\";\n\nimport Layout from \"../../components/layout\";\nimport SEO from \"../../components/seo\";\nimport Subpage from \"../../components/subpage\";\n\nimport \"../../assets/styles.css\";\nimport constants from '../../../constants.js';\n\nconst SOCKET_URL = constants[\"SOCKET_URL\"];\nconst API_URL = constants[\"API_URL\"];\n\nconst ChatLoginPage = () => {\n  const [cookies, setCookies] = useCookies([\"name\", \"token\"]);\n\n  useEffect(() => {\n    console.log(cookies);\n    setCookies(\"name\", \"\",{ path: '/chat' });\n    setCookies(\"token\", \"\",{ path: '/chat' });\n  }, []);\n  \n  const login = (event) => {\n    event.preventDefault()\n\n    const user_input = event.target[0].value;\n    const pass_input = event.target[1].value;\n    axios.post(API_URL + \"login\", {\n      username: user_input,\n      password: pass_input\n    })\n    .then((response) => {\n      if (response.data.status === \"success\") {\n        setCookies(\"name\", response.data.name,{ path: '/chat' });\n        setCookies(\"token\", response.data.token,{ path: '/chat' });\n        if (typeof window !== `undefined`) {\n          if (response.data.admin !== \"no\") {\n              window.location.replace(\"/chat/admin\");\n          }\n          else {\n            if (typeof window !== `undefined`) {\n              window.location.replace(\"/chat\");\n            }\n          }\n        }\n      }\n      else {\n        // Place handling of error message here\n        console.log(\"Login failed\");\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n  }\n\n  return (\n    <Layout>\n      <SEO title=\"Chat Login\" />\n      <Subpage>\n        <h3> Welcome back! Sign into Living Water Chat </h3><br/>\n        <form onSubmit={login}>\n          <input className=\"text-input\" type=\"text\" id=\"name\"\n            name=\"name\" placeholder=\"username\"/><br/>\n          <input className=\"text-input\" type=\"password\"\n            name=\"password\" placeholder=\"password\"/><br/><br/>\n          <div className=\"button-box\">\n            <input className=\"cred-button\" type=\"submit\" value=\"login\"></input>\n          </div>\n        </form>\n        <span className=\"here-before\"> Never been here before? <a href=\"/chat/register\">Register</a> </span><br/>\n      </Subpage>\n    </Layout>\n  );\n};\n\nexport default ChatLoginPage;\n"],"sourceRoot":""}