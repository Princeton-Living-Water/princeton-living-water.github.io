{"version":3,"sources":["webpack:///./src/pages/chat/register.js"],"names":["API_URL","constants","ChatRegisterPage","useCookies","cookies","setCookies","useState","anonymous","setAnonymous","isAdmin","setIsAdmin","errorMessage","setErrorMessage","title","onSubmit","event","preventDefault","anonInput","target","checked","userInput","value","passInput","userData","username","password","adminInput","firstNameInput","lastNameInput","adminPassInput","axios","post","then","response","data","status","name","path","token","console","log","admin","navigate","catch","error","className","type","placeholder","onChange","href"],"mappings":"4PAaMA,G,oBAAUC,IAAS,SA6HVC,UA3HU,WAAO,IAAD,EACCC,YAAW,CAAC,OAAQ,UAA3CC,EADsB,KACbC,EADa,OAEKC,oBAAS,GAApCC,EAFsB,KAEXC,EAFW,OAGCF,oBAAS,GAAhCG,EAHsB,KAGbC,EAHa,OAIWJ,mBAAS,IAA1CK,EAJsB,KAIRC,EAJQ,KA2E7B,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKC,MAAM,kBACX,kBAAC,IAAD,KACE,gEAAyC,6BACzC,0BAAMC,SA1EG,SAACC,GACdA,EAAMC,iBAEN,IAAMC,EAAYF,EAAMG,OAAO,GAAGC,QAC5BC,EAAYL,EAAMG,OAAO,GAAGG,MAC5BC,EAAYP,EAAMG,OAAO,GAAGG,MAClC,GAAkB,KAAdD,GAAkC,KAAdE,EAAxB,CAKA,IAAMC,EAAW,CACfC,SAAUJ,EACVK,SAAUH,EACVf,UAAWU,GAGb,IAAKA,EAAW,CACd,IAAMS,EAAaX,EAAMG,OAAO,GAAGC,QAC7BQ,EAAiBZ,EAAMG,OAAO,GAAGG,MACjCO,EAAgBb,EAAMG,OAAO,GAAGG,MACtC,GAAuB,KAAnBM,GAA2C,KAAlBC,EAE3B,YADAhB,EAAgB,gBAQlB,GAJAW,EAAQ,UAAgBI,EACxBJ,EAAQ,SAAeK,EACvBL,EAAQ,MAAYG,EAEhBA,EAAY,CACd,IAAMG,EAAiBd,EAAMG,OAAO,GAAGG,MACvC,GAAuB,KAAnBQ,EAEF,YADAjB,EAAgB,0BAIlBW,EAAQ,cAAoBM,GAIhCC,IAAMC,KAAK/B,EAAU,aAAcuB,GAClCS,MAAK,SAACC,GACwB,YAAzBA,EAASC,KAAKC,QAChB9B,EAAW,OAAQ4B,EAASC,KAAKE,KAAM,CAAEC,KAAM,UAC/ChC,EAAW,QAAS4B,EAASC,KAAKI,MAAO,CAAED,KAAM,UACjDE,QAAQC,IAAIpC,GACgB,QAAxB6B,EAASC,KAAKO,MAChBC,YAAS,eAETA,YAAS,UAGX9B,EAAgBqB,EAASC,KAAKC,WAGjCQ,OAAM,SAACC,GACNL,QAAQC,IAAII,WAlDZhC,EAAgB,iCAmEUiC,UAAU,YAChC,2BAAOA,UAAU,aAAaC,KAAK,OAAOV,KAAK,OAAOW,YAAY,aAClE,2BAAOF,UAAU,aAAaC,KAAK,WAAWV,KAAK,WAAWW,YAAY,aAE1E,2BAAOF,UAAU,mBACf,2BAAOA,UAAU,iBAAiBC,KAAK,WAAWV,KAAK,YACrDjB,QAASZ,EAAWyC,SAnBF,WAC5BxC,GAAcD,MAgBR,sBAMEA,GACA,yBAAKsC,UAAU,mBACb,yBAAKA,UAAU,wBACb,2BAAOA,UAAU,wBAAwBC,KAAK,OAAOV,KAAK,YAAYW,YAAY,eAClF,2BAAOF,UAAU,wBAAwBC,KAAK,OAAOV,KAAK,WAAWW,YAAY,eAEnF,yBAAKF,UAAU,yBACb,+BACE,2BAAOA,UAAU,iBAAiBC,KAAK,WAAWV,KAAK,QACrDjB,QAASV,EAASuC,SA5BR,WAC1BtC,GAAYD,MAyBA,UAKCA,GACC,2BAAOoC,UAAU,yBAAyBC,KAAK,WAAWV,KAAK,YAAYW,YAAY,qBAM9FpC,GACC,yBAAKkC,UAAU,iBAAiBlC,GAGlC,yBAAKkC,UAAU,cACb,2BAAOA,UAAU,cAAcC,KAAK,SAASzB,MAAM,eAGvD,0BAAMwB,UAAU,eAAhB,sBAAiD,uBAAGI,KAAK,eAAR,UAAjD","file":"component---src-pages-chat-register-js-f2efe1cba730d500e7f2.js","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useCookies } from \"react-cookie\";\n\nimport Layout from \"../../components/layout\";\nimport SEO from \"../../components/seo\";\nimport Subpage from \"../../components/subpage\";\nimport constants from \"../../../constants.js\";\nimport { navigate } from \"../../js/utils.js\";\n\nimport \"../../assets/styles.css\";\nimport \"../../assets/chat.css\";\n\nconst API_URL = constants[\"API_URL\"];\n\nconst ChatRegisterPage = () => {\n  const [cookies, setCookies] = useCookies([\"name\", \"token\"]);\n  const [anonymous, setAnonymous] = useState(true);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const signup = (event) => {\n    event.preventDefault();\n\n    const anonInput = event.target[2].checked;\n    const userInput = event.target[0].value;\n    const passInput = event.target[1].value;\n    if (userInput === \"\" || passInput === \"\") {\n      setErrorMessage(\"username or password missing\");\n      return;\n    }\n\n    const userData = {\n      username: userInput,\n      password: passInput,\n      anonymous: anonInput\n    }\n\n    if (!anonInput) {\n      const adminInput = event.target[5].checked;\n      const firstNameInput = event.target[3].value;\n      const lastNameInput = event.target[4].value;\n      if (firstNameInput === \"\" || lastNameInput === \"\") {\n        setErrorMessage(\"name missing\");\n        return;\n      }\n\n      userData[\"firstName\"] = firstNameInput;\n      userData[\"lastName\"] = lastNameInput;\n      userData[\"admin\"] = adminInput;\n\n      if (adminInput) {\n        const adminPassInput = event.target[6].value;\n        if (adminPassInput === \"\") {\n          setErrorMessage(\"admin password missing\");\n          return;\n        }\n\n        userData[\"adminPassword\"] = adminPassInput;\n      }\n    }\n\n    axios.post(API_URL + \"createUser\", userData)\n    .then((response) => {\n      if (response.data.status === \"success\") {\n        setCookies(\"name\", response.data.name, { path: '/chat' });\n        setCookies(\"token\", response.data.token, { path: '/chat' });\n        console.log(cookies);\n        if (response.data.admin === \"yes\")\n          navigate(\"/chat/admin\");\n        else\n          navigate(\"/chat\");\n      }\n      else {\n        setErrorMessage(response.data.status);\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n  }\n\n  const handleAnonymousChange = () => {\n    setAnonymous(!anonymous);\n  }\n\n  const handleIsAdminChange = () => {\n    setIsAdmin(!isAdmin);\n  }\n\n  return (\n    <Layout>\n      <SEO title=\"Chat Register\" />\n      <Subpage>\n        <h3> Register for Living Water Chat </h3><br/>\n        <form onSubmit={signup} className=\"cred-box\">\n          <input className=\"text-input\" type=\"text\" name=\"name\" placeholder=\"username\"/>\n          <input className=\"text-input\" type=\"password\" name=\"password\" placeholder=\"password\"/>\n\n          <label className=\"anonymous-input\">\n            <input className=\"checkbox-input\" type=\"checkbox\" name=\"anonymous\" \n              checked={anonymous} onChange={handleAnonymousChange} />\n            Keep me anonymous\n          </label>\n          \n          {!anonymous &&\n            <div className=\"additional-info\">\n              <div className=\"additional-info-name\">\n                <input className=\"additional-name-input\" type=\"text\" name=\"firstname\" placeholder=\"first name\"/>\n                <input className=\"additional-name-input\" type=\"text\" name=\"lastname\" placeholder=\"last name\"/>\n              </div>\n              <div className=\"additional-info-admin\">\n                <label>\n                  <input className=\"checkbox-input\" type=\"checkbox\" name=\"admin\" \n                    checked={isAdmin} onChange={handleIsAdminChange} />\n                  Admin?\n                </label>\n                {isAdmin &&\n                  <input className=\"additional-admin-input\" type=\"password\" name=\"adminpass\" placeholder=\"admin password\"/>\n                }\n              </div>\n            </div>\n          }\n\n          {errorMessage &&\n            <div className=\"error-message\">{errorMessage}</div>\n          }\n\n          <div className=\"button-box\">\n            <input className=\"cred-button\" type=\"submit\" value=\"register\"></input>\n          </div>\n        </form>\n        <span className=\"here-before\"> Been here before? <a href=\"/chat/login\">Log in</a> </span>\n      </Subpage>\n    </Layout>\n  );\n};\n\nexport default ChatRegisterPage;\n"],"sourceRoot":""}