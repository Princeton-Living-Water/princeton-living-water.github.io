{"version":3,"sources":["webpack:///./src/components/chatMessage.js","webpack:///./node_modules/@babel/runtime/helpers/esm/extends.js","webpack:///./node_modules/use-isomorphic-layout-effect/dist/use-isomorphic-layout-effect.browser.esm.js","webpack:///./node_modules/use-latest/dist/use-latest.esm.js","webpack:///./node_modules/use-composed-ref/dist/use-composed-ref.esm.js","webpack:///./node_modules/react-textarea-autosize/dist/react-textarea-autosize.browser.esm.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./src/pages/chat/index.js"],"names":["ChatMessage","message","msg","sender","msgWrapper","msgClass","className","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","value","ref","current","updateRef","libRef","userRef","prevUserRef","instance","HIDDEN_TEXTAREA_STYLE","height","visibility","overflow","position","top","right","forceHiddenStyles","node","keys","forEach","style","setProperty","hiddenTextarea","noop","SIZING_STYLE","isIE","document","documentElement","currentStyle","_ref","cacheMeasurements","maxRows","minRows","_ref$onChange","onChange","_ref$onHeightChange","onHeightChange","props","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","latestListener","isControlled","undefined","heightRef","measurementsCacheRef","resizeTextarea","nodeSizingData","window","getComputedStyle","obj","sizingStyle","reduce","acc","prop","boxSizing","width","parseFloat","borderRightWidth","borderLeftWidth","paddingRight","paddingLeft","paddingSize","paddingBottom","paddingTop","borderSize","borderBottomWidth","borderTopWidth","getSizingData","_calculateNodeHeight","sizingData","Infinity","createElement","setAttribute","parentNode","body","appendChild","_key","scrollHeight","getHeight","rowHeight","minHeight","Math","max","maxHeight","min","calculateNodeHeight","placeholder","handler","event","addEventListener","removeEventListener","ChatPage","useState","messages","setMessages","setNumMessages","msgInput","setMsgInput","useCookies","cookies","chatBarRef","useRef","formRef","useEffect","name","token","connectSocket","listenForMessages","updateMessages","disconnectSocket","location","replace","data","concat","handleSubmit","preventDefault","sendMessage","title","map","index","onSubmit","onKeyDown","e","keyCode","shiftKey","type","required","icon","faArrowRight"],"mappings":"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","file":"component---src-pages-chat-index-js-c6f0f995ac2f3a8a3d39.js","sourcesContent":["import React from \"react\";\n\nimport \"../assets/devos.css\";\n\nconst ChatMessage = ({ message }) => {\n  const msg = message.message;\n  const sender = message.sender;\n\n  const msgWrapper = sender === \"admin\" ? \"otherWrapper\" : \"userWrapper\";\n  const msgClass = sender === \"admin\" ? \"otherMessage\" : \"userMessage\";\n  return (\n    <div className={msgWrapper}>\n      <div className={msgClass}>\n        {msg}\n      </div>\n    </div>\n  );\n}\n\nexport default ChatMessage;","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import { useLayoutEffect } from 'react';\nvar index = useLayoutEffect;\nexport default index;","import { useRef } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\n\nvar useLatest = function useLatest(value) {\n  var ref = useRef(value);\n  useIsomorphicLayoutEffect(function () {\n    ref.current = value;\n  });\n  return ref;\n};\n\nexport default useLatest;","import { useRef, useCallback } from 'react';\n\nvar updateRef = function updateRef(ref, value) {\n  if (typeof ref === 'function') {\n    ref(value);\n    return;\n  }\n\n  ref.current = value;\n};\n\nvar useComposedRef = function useComposedRef(libRef, userRef) {\n  var prevUserRef = useRef();\n  return useCallback(function (instance) {\n    libRef.current = instance;\n\n    if (prevUserRef.current) {\n      updateRef(prevUserRef.current, null);\n    }\n\n    prevUserRef.current = userRef;\n\n    if (!userRef) {\n      return;\n    }\n\n    updateRef(userRef, instance);\n  }, [userRef]);\n};\n\nexport default useComposedRef;","import \"core-js/modules/es6.array.reduce\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.for-each\";\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { useEffect, forwardRef, useRef, useLayoutEffect, createElement } from 'react';\nimport useLatest from 'use-latest';\nimport useComposedRef from 'use-composed-ref';\nvar HIDDEN_TEXTAREA_STYLE = {\n  'min-height': '0',\n  'max-height': 'none',\n  height: '0',\n  visibility: 'hidden',\n  overflow: 'hidden',\n  position: 'absolute',\n  'z-index': '-1000',\n  top: '0',\n  right: '0'\n};\n\nvar forceHiddenStyles = function forceHiddenStyles(node) {\n  Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function (key) {\n    node.style.setProperty(key, HIDDEN_TEXTAREA_STYLE[key], 'important');\n  });\n}; //   export type CalculatedNodeHeights = [height: number, rowHeight: number];\n// https://github.com/microsoft/TypeScript/issues/28259\n\n\nvar hiddenTextarea = null;\n\nvar getHeight = function getHeight(node, sizingData) {\n  var height = node.scrollHeight;\n\n  if (sizingData.sizingStyle.boxSizing === 'border-box') {\n    // border-box: add border, since height = content + padding + border\n    return height + sizingData.borderSize;\n  } // remove padding, since height = content\n\n\n  return height - sizingData.paddingSize;\n};\n\nfunction calculateNodeHeight(sizingData, value, minRows, maxRows) {\n  if (minRows === void 0) {\n    minRows = 1;\n  }\n\n  if (maxRows === void 0) {\n    maxRows = Infinity;\n  }\n\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement('textarea');\n    hiddenTextarea.setAttribute('tab-index', '-1');\n    hiddenTextarea.setAttribute('aria-hidden', 'true');\n    forceHiddenStyles(hiddenTextarea);\n  }\n\n  if (hiddenTextarea.parentNode === null) {\n    document.body.appendChild(hiddenTextarea);\n  }\n\n  var paddingSize = sizingData.paddingSize,\n      borderSize = sizingData.borderSize,\n      sizingStyle = sizingData.sizingStyle;\n  var boxSizing = sizingStyle.boxSizing;\n  Object.keys(sizingStyle).forEach(function (_key) {\n    var key = _key;\n    hiddenTextarea.style[key] = sizingStyle[key];\n  });\n  forceHiddenStyles(hiddenTextarea);\n  hiddenTextarea.value = value;\n  var height = getHeight(hiddenTextarea, sizingData); // measure height of a textarea with a single row\n\n  hiddenTextarea.value = 'x';\n  var rowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  var minHeight = rowHeight * minRows;\n\n  if (boxSizing === 'border-box') {\n    minHeight = minHeight + paddingSize + borderSize;\n  }\n\n  height = Math.max(minHeight, height);\n  var maxHeight = rowHeight * maxRows;\n\n  if (boxSizing === 'border-box') {\n    maxHeight = maxHeight + paddingSize + borderSize;\n  }\n\n  height = Math.min(maxHeight, height);\n  return [height, rowHeight];\n}\n\nvar noop = function noop() {};\n\nvar pick = function pick(props, obj) {\n  return props.reduce(function (acc, prop) {\n    acc[prop] = obj[prop];\n    return acc;\n  }, {});\n};\n\nvar SIZING_STYLE = ['borderBottomWidth', 'borderLeftWidth', 'borderRightWidth', 'borderTopWidth', 'boxSizing', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'lineHeight', 'paddingBottom', 'paddingLeft', 'paddingRight', 'paddingTop', // non-standard\n'tabSize', 'textIndent', // non-standard\n'textRendering', 'textTransform', 'width'];\nvar isIE = !!document.documentElement.currentStyle;\n\nvar getSizingData = function getSizingData(node) {\n  var style = window.getComputedStyle(node);\n\n  if (style === null) {\n    return null;\n  }\n\n  var sizingStyle = pick(SIZING_STYLE, style);\n  var boxSizing = sizingStyle.boxSizing; // probably node is detached from DOM, can't read computed dimensions\n\n  if (boxSizing === '') {\n    return null;\n  } // IE (Edge has already correct behaviour) returns content width as computed width\n  // so we need to add manually padding and border widths\n\n\n  if (isIE && boxSizing === 'border-box') {\n    sizingStyle.width = parseFloat(sizingStyle.width) + parseFloat(sizingStyle.borderRightWidth) + parseFloat(sizingStyle.borderLeftWidth) + parseFloat(sizingStyle.paddingRight) + parseFloat(sizingStyle.paddingLeft) + 'px';\n  }\n\n  var paddingSize = parseFloat(sizingStyle.paddingBottom) + parseFloat(sizingStyle.paddingTop);\n  var borderSize = parseFloat(sizingStyle.borderBottomWidth) + parseFloat(sizingStyle.borderTopWidth);\n  return {\n    sizingStyle: sizingStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize\n  };\n};\n\nvar useWindowResizeListener = function useWindowResizeListener(listener) {\n  var latestListener = useLatest(listener);\n  useEffect(function () {\n    var handler = function handler(event) {\n      latestListener.current(event);\n    };\n\n    window.addEventListener('resize', handler);\n    return function () {\n      window.removeEventListener('resize', handler);\n    };\n  }, []);\n};\n\nvar TextareaAutosize = function TextareaAutosize(_ref, userRef) {\n  var cacheMeasurements = _ref.cacheMeasurements,\n      maxRows = _ref.maxRows,\n      minRows = _ref.minRows,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? noop : _ref$onChange,\n      _ref$onHeightChange = _ref.onHeightChange,\n      onHeightChange = _ref$onHeightChange === void 0 ? noop : _ref$onHeightChange,\n      props = _objectWithoutPropertiesLoose(_ref, [\"cacheMeasurements\", \"maxRows\", \"minRows\", \"onChange\", \"onHeightChange\"]);\n\n  if (process.env.NODE_ENV !== 'production' && props.style) {\n    if ('maxHeight' in props.style) {\n      throw new Error('Using `style.maxHeight` for <TextareaAutosize/> is not supported. Please use `maxRows`.');\n    }\n\n    if ('minHeight' in props.style) {\n      throw new Error('Using `style.minHeight` for <TextareaAutosize/> is not supported. Please use `minRows`.');\n    }\n  }\n\n  var isControlled = props.value !== undefined;\n  var libRef = useRef(null);\n  var ref = useComposedRef(libRef, userRef);\n  var heightRef = useRef(0);\n  var measurementsCacheRef = useRef();\n\n  var resizeTextarea = function resizeTextarea() {\n    var node = libRef.current;\n    var nodeSizingData = cacheMeasurements && measurementsCacheRef.current ? measurementsCacheRef.current : getSizingData(node);\n\n    if (!nodeSizingData) {\n      return;\n    }\n\n    measurementsCacheRef.current = nodeSizingData;\n\n    var _calculateNodeHeight = calculateNodeHeight(nodeSizingData, node.value || node.placeholder || 'x', minRows, maxRows),\n        height = _calculateNodeHeight[0],\n        rowHeight = _calculateNodeHeight[1];\n\n    if (heightRef.current !== height) {\n      heightRef.current = height;\n      node.style.setProperty('height', height + \"px\", 'important');\n      onHeightChange(height, {\n        rowHeight: rowHeight\n      });\n    }\n  };\n\n  var handleChange = function handleChange(event) {\n    if (!isControlled) {\n      resizeTextarea();\n    }\n\n    onChange(event);\n  };\n\n  {\n    useLayoutEffect(resizeTextarea);\n  }\n  useWindowResizeListener(resizeTextarea);\n  return /*#__PURE__*/createElement(\"textarea\", _extends({}, props, {\n    onChange: handleChange,\n    ref: ref\n  }));\n};\n\nvar index = /* #__PURE__ */forwardRef(TextareaAutosize);\nexport default index;","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { navigate } from \"gatsby\";\nimport { useCookies } from \"react-cookie\";\n\nimport Layout from \"../../components/layout\";\nimport SEO from \"../../components/seo\";\nimport Subpage from \"../../components/subpage\";\nimport ChatMessage from \"../../components/chatMessage\";\nimport { connectSocket, disconnectSocket, listenForMessages, sendMessage } from \"../../js/socket.js\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faArrowRight } from '@fortawesome/free-solid-svg-icons'\nimport TextareaAutosize from 'react-textarea-autosize'\n\nimport \"../../assets/styles.css\";\nimport \"../../assets/chat.css\";\n\nconst ChatPage = () => {\n  const [messages, setMessages] = useState([]);\n  const [numMessages, setNumMessages] = useState(0);\n  const [msgInput, setMsgInput] = useState(\"\");\n  const [cookies, setCookies] = useCookies([\"name\", \"token\"]);\n  const chatBarRef = useRef(null);\n  const formRef = useRef(null);\n\n  useEffect(() => {\n    const {name, token} = cookies;\n    if (!name || !token) {\n      if (typeof window !== `undefined`) {\n        window.location.replace(\"/chat/login\");\n      }\n      return;\n    }\n\n    connectSocket({ name, token, setMessages, setNumMessages });\n    listenForMessages(updateMessages);\n    \n    return () => disconnectSocket();\n  }, []);\n\n  const updateMessages = (data) => {\n    setMessages(messages => messages.concat(data));\n  }\n\n  const handleInput = (event) => {\n    setMsgInput(event.target.value);\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if(msgInput != '') {\n      sendMessage(msgInput);\n      setMsgInput(\"\")\n    }\n  }\n\n  const handleScroll = (event) => {\n    if(event > 100) {\n      chatBarRef.current.style[\"overflowY\"] = \"scroll\"\n    } else {\n      chatBarRef.current.style[\"overflowY\"] = \"hidden\"\n    }\n  }\n\n  const onEnterPress = (e) => {\n    if(e.keyCode == 13 && e.shiftKey == false) {\n        e.preventDefault();\n        handleSubmit(e)\n    }\n  }\n\n  return (\n    <Layout>\n      <SEO title=\"Chat\" />\n      <Subpage>\n        <h2>{cookies.name}</h2>\n        <div className=\"messagesWrapper\">\n          {messages.map((msg, index) => (\n            <ChatMessage message={msg} key={index}/>\n          ))}\n        </div>\n        <form ref={formRef} className=\"chatInput\" onSubmit={handleSubmit}>\n          <TextareaAutosize onKeyDown={onEnterPress} ref={chatBarRef} onHeightChange={handleScroll} className=\"chatBar\" maxRows=\"6\" type=\"text\" placeholder=\"send message\" value={msgInput} onChange={handleInput} required/>\n          <button className=\"chatSubmit\" type=\"submit\"><FontAwesomeIcon icon={faArrowRight} /></button>\n        </form>\n      </Subpage>\n    </Layout>\n  );\n};\n\nexport default ChatPage;\n"],"sourceRoot":""}