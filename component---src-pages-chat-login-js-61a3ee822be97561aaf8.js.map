{"version":3,"sources":["webpack:///./src/pages/chat/login.js"],"names":["API_URL","constants","ChatLoginPage","useCookies","setCookies","useState","errorMessage","setErrorMessage","useEffect","path","title","onSubmit","event","preventDefault","username","password","user_input","target","value","pass_input","axios","post","then","response","data","status","name","token","admin","navigate","catch","error","console","log","className","type","id","placeholder","href"],"mappings":"qOAYMA,G,UAAUC,IAAS,SAoEVC,UAlEO,WAAO,IAAD,EACIC,YAAW,CAAC,OAAQ,UAAlCC,GADU,aAEcC,mBAAS,IAA1CC,EAFmB,KAELC,EAFK,KAI1BC,qBAAU,WACRJ,EAAW,OAAQ,GAAI,CAAEK,KAAM,UAC/BL,EAAW,QAAS,GAAI,CAAEK,KAAM,YAC/B,IAkCH,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKC,MAAM,eACX,kBAAC,IAAD,KACE,2EAAoD,6BACpD,0BAAMC,SAbQ,SAACC,GACnBA,EAAMC,iBAEN,IA3BaC,EAAUC,EA2BjBC,EAAaJ,EAAMK,OAAO,GAAGC,MAC7BC,EAAaP,EAAMK,OAAO,GAAGC,MA5BtBJ,EA6BPE,EA7BiBD,EA6BLI,EA5BlBC,IAAMC,KAAKrB,EAAU,QAAS,CAC5Bc,WACAC,aAEDO,MAAK,SAACC,GACwB,YAAzBA,EAASC,KAAKC,QAChBrB,EAAW,OAAQmB,EAASC,KAAKE,KAAM,CAAEjB,KAAM,UAC/CL,EAAW,QAASmB,EAASC,KAAKG,MAAO,CAAElB,KAAM,UACrB,QAAxBc,EAASC,KAAKI,MAChBC,YAAS,eAETA,YAAS,UAIXtB,EAAgBgB,EAASC,KAAKC,WAGjCK,OAAM,SAACC,GACNC,QAAQC,IAAIF,OAiBmBG,UAAU,YACrC,2BAAOA,UAAU,aAAaC,KAAK,OAAOC,GAAG,OAC3CV,KAAK,OAAOW,YAAY,aAC1B,2BAAOH,UAAU,aAAaC,KAAK,WACjCT,KAAK,WAAWW,YAAY,aAE7B/B,GACC,yBAAK4B,UAAU,iBAAiB5B,GAElC,yBAAK4B,UAAU,cACb,2BAAOA,UAAU,cAAcC,KAAK,SAASjB,MAAM,YAIvD,0BAAMgB,UAAU,eAAhB,4BAAuD,uBAAGI,KAAK,kBAAR,YAAvD","file":"component---src-pages-chat-login-js-61a3ee822be97561aaf8.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useCookies } from \"react-cookie\";\n\nimport Layout from \"../../components/layout\";\nimport SEO from \"../../components/seo\";\nimport Subpage from \"../../components/subpage\";\nimport constants from \"../../../constants.js\";\nimport { navigate } from \"../../js/utils.js\";\n\nimport \"../../assets/styles.css\";\n\nconst API_URL = constants[\"API_URL\"];\n\nconst ChatLoginPage = () => {\n  const [cookies, setCookies] = useCookies([\"name\", \"token\"]);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  useEffect(() => {\n    setCookies(\"name\", \"\", { path: '/chat' });\n    setCookies(\"token\", \"\", { path: '/chat' });\n  }, []);\n\n  const login = (username, password) => {\n    axios.post(API_URL + \"login\", {\n      username, \n      password\n    })\n    .then((response) => {\n      if (response.data.status === \"success\") {\n        setCookies(\"name\", response.data.name, { path: '/chat' });\n        setCookies(\"token\", response.data.token, { path: '/chat' });\n        if (response.data.admin === \"yes\")\n          navigate(\"/chat/admin\");\n        else\n          navigate(\"/chat\");\n      }\n      else {\n        // Place handling of error message here\n        setErrorMessage(response.data.status);\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n  }\n  \n  const handleLogin = (event) => {\n    event.preventDefault()\n\n    const user_input = event.target[0].value;\n    const pass_input = event.target[1].value;\n    login(user_input, pass_input);\n  }\n\n  return (\n    <Layout>\n      <SEO title=\"Chat Login\" />\n      <Subpage>\n        <h3> Welcome back! Sign into Living Water Chat </h3><br/>\n        <form onSubmit={handleLogin} className=\"cred-box\">\n          <input className=\"text-input\" type=\"text\" id=\"name\"\n            name=\"name\" placeholder=\"username\"/>\n          <input className=\"text-input\" type=\"password\"\n            name=\"password\" placeholder=\"password\"/>\n\n          {errorMessage &&\n            <div className=\"error-message\">{errorMessage}</div>\n          }\n          <div className=\"button-box\">\n            <input className=\"cred-button\" type=\"submit\" value=\"login\"></input>\n          </div>\n        </form>\n\n        <span className=\"here-before\"> Never been here before? <a href=\"/chat/register\">Register</a> </span>\n      </Subpage>\n    </Layout>\n  );\n};\n\nexport default ChatLoginPage;\n"],"sourceRoot":""}