{"version":3,"sources":["webpack:///./src/components/chatMessage.js","webpack:///./src/pages/chat/index.js"],"names":["ChatMessage","message","msg","msgClass","sender","className","ChatPage","useState","messages","setMessages","setNumMessages","msgInput","setMsgInput","useCookies","cookies","useEffect","name","token","connectSocket","listenForMessages","updateMessages","disconnectSocket","navigate","data","concat","title","map","index","key","onSubmit","event","preventDefault","sendMessage","type","placeholder","value","onChange","target"],"mappings":"iMAgBeA,G,UAZK,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACfC,EAAMD,EAAQA,QAGdE,EAAsB,UAFbF,EAAQG,OAEe,eAAiB,cACvD,OACE,yBAAKC,UAAW,kBAAoBF,GACjCD,K,sBCqDQI,UAnDE,WAAO,IAAD,EACWC,mBAAS,IAAlCC,EADc,KACJC,EADI,OAEiBF,mBAAS,GAA3BG,GAFC,aAGWH,mBAAS,IAAlCI,EAHc,KAGJC,EAHI,OAISC,YAAW,CAAC,OAAQ,UAA3CC,EAJc,UAMrBC,qBAAU,WAAO,IACRC,EAAeF,EAAfE,KAAMC,EAASH,EAATG,MACb,GAAKD,GAASC,EAQd,OAHAC,YAAc,CAAEF,OAAMC,QAAOR,cAAaC,mBAC1CS,YAAkBC,GAEX,kBAAMC,eAPXC,mBAAS,iBAQV,IAEH,IAAMF,EAAiB,SAACG,GACtBd,GAAY,SAAAD,GAAQ,OAAIA,EAASgB,OAAOD,OAY1C,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKE,MAAM,SACX,kBAAC,IAAD,KACE,4BAAKX,EAAQE,MACb,yBAAKX,UAAU,mBACZG,EAASkB,KAAI,SAACxB,EAAKyB,GAAN,OACZ,kBAAC,EAAD,CAAa1B,QAASC,EAAK0B,IAAKD,QAGpC,0BAAME,SAfS,SAACC,GACpBA,EAAMC,iBACNC,YAAYrB,KAcN,2BAAOsB,KAAK,OAAOC,YAAY,eAAeC,MAAOxB,EAAUyB,SApBnD,SAACN,GACnBlB,EAAYkB,EAAMO,OAAOF,UAoBnB,2BAAOF,KAAK,SAASE,MAAM","file":"component---src-pages-chat-index-js-10b5966409b442e6b463.js","sourcesContent":["import React from \"react\";\n\nimport \"../assets/devos.css\";\n\nconst ChatMessage = ({ message }) => {\n  const msg = message.message;\n  const sender = message.sender;\n\n  const msgClass = sender === \"admin\" ? \"otherMessage\" : \"userMessage\";\n  return (\n    <div className={\"messageWrapper \" + msgClass}>\n      {msg}\n    </div>\n  );\n}\n\nexport default ChatMessage;","\nimport React, { useState, useEffect } from \"react\";\nimport { navigate } from \"gatsby\";\nimport { useCookies } from \"react-cookie\";\n\nimport Layout from \"../../components/layout\";\nimport SEO from \"../../components/seo\";\nimport Subpage from \"../../components/subpage\";\nimport ChatMessage from \"../../components/chatMessage\";\nimport { connectSocket, disconnectSocket, listenForMessages, sendMessage } from \"../../js/socket.js\";\n\nimport \"../../assets/styles.css\";\n\nconst ChatPage = () => {\n  const [messages, setMessages] = useState([]);\n  const [numMessages, setNumMessages] = useState(0);\n  const [msgInput, setMsgInput] = useState(\"\");\n  const [cookies, setCookies] = useCookies([\"name\", \"token\"]);\n\n  useEffect(() => {\n    const {name, token} = cookies;\n    if (!name || !token) {\n      navigate(\"/chat/login\");\n      return;\n    }\n\n    connectSocket({ name, token, setMessages, setNumMessages });\n    listenForMessages(updateMessages);\n    \n    return () => disconnectSocket();\n  }, []);\n\n  const updateMessages = (data) => {\n    setMessages(messages => messages.concat(data));\n  }\n\n  const handleInput = (event) => {\n    setMsgInput(event.target.value);\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    sendMessage(msgInput);\n  }\n\n  return (\n    <Layout>\n      <SEO title=\"Chat\" />\n      <Subpage>\n        <h2>{cookies.name}</h2>\n        <div className=\"messagesWrapper\">\n          {messages.map((msg, index) => (\n            <ChatMessage message={msg} key={index}/>\n          ))}\n        </div>\n        <form onSubmit={handleSubmit}>\n          <input type=\"text\" placeholder=\"send message\" value={msgInput} onChange={handleInput}/>\n          <input type=\"submit\" value=\"send\"/>\n        </form>\n      </Subpage>\n    </Layout>\n  );\n};\n\nexport default ChatPage;\n"],"sourceRoot":""}